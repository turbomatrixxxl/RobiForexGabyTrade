"use strict";(self.webpackChunkmy_react_app=self.webpackChunkmy_react_app||[]).push([[331],{4387:(e,t,s)=>{s.d(t,{R:()=>_});var a=s(3003),n=s(2099);const i=e=>e.chats,o=(0,n.Mz)([i],e=>e.activeChats),r=(0,n.Mz)([i],e=>e.chats),c=(0,n.Mz)([i],e=>e.loading),l=(0,n.Mz)([i],e=>e.error),d=(0,n.Mz)([i],e=>e.visitedChatIds),m={},g=e=>(m[e]||(m[e]=(0,n.Mz)([r],t=>t.find(t=>t.id===e)||null)),m[e]),_=()=>{const e=(0,a.wA)();return{activeChats:(0,a.d4)(o),isLoading:(0,a.d4)(c),errorChats:(0,a.d4)(l),chats:(0,a.d4)(r),chatById:(0,a.d4)(g),dispatch:e,visitedChatIds:(0,a.d4)(d)}}},8331:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var a=s(5043),n=s(3216),i=s(4387),o=s(8387);const r={chatPage:"ConversationsPage_chatPage__iHtDC",messageList:"ConversationsPage_messageList__UOKyd",outbox:"ConversationsPage_outbox__vbClZ",inbox:"ConversationsPage_inbox__FdOzf",ownerName:"ConversationsPage_ownerName__A0CU9",left:"ConversationsPage_left__YpJWE",right:"ConversationsPage_right__suqrc",msgOutboxContent:"ConversationsPage_msgOutboxContent__4-udD",timestampOutbox:"ConversationsPage_timestampOutbox__WioDZ",msgInboxContent:"ConversationsPage_msgInboxContent__013QE",timestampInbox:"ConversationsPage_timestampInbox__Ch2ye",filePreview:"ConversationsPage_filePreview__bdJ60",imagePreview:"ConversationsPage_imagePreview__kPE-I"};var c=s(579);const l=function(){const{chatId:e}=(0,n.g)(),{chats:t}=(0,i.R)(),{file:s}=(0,n.KC)(),l=(0,a.useRef)(null),d=t.find(t=>t.id===e),m=(null===d||void 0===d?void 0:d.messages)||[],g=e=>{let t=new Date(e);if(isNaN(t.getTime())){const s=e.replace(/(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}):(\d{2})\.(\d{3})Z$/,"$1:59.$3Z");t=new Date(s)}if(isNaN(t.getTime()))return"";t.getSeconds()>59&&t.setSeconds(59);const s=t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),a=t.getDate(),n=t.toLocaleString("default",{month:"long"}),i=t.getFullYear();return"".concat(a," ").concat(n," ").concat(i,"-").concat(s)},_=[...m].sort((e,t)=>new Date(g(e.sentAt)).getTime()-new Date(g(t.sentAt)).getTime());if((0,a.useEffect)(()=>{var e;null===(e=l.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[_]),!d)return(0,c.jsx)("div",{className:r.notFound,children:"Chat not found"});const u=JSON.parse(localStorage.getItem("user"));return(0,c.jsx)("div",{className:r.chatPage,children:(0,c.jsxs)("ul",{className:r.messageList,children:[_.map(e=>{var t;return e.isInbox?(0,c.jsxs)("li",{className:r.inbox,children:[(0,c.jsx)("span",{className:(0,o.A)(r.ownerName,r.left),children:null!==(t=null===d||void 0===d?void 0:d.user.name)&&void 0!==t?t:""}),(0,c.jsx)("span",{className:r.msgInboxContent,children:e.content}),(0,c.jsx)("span",{className:r.timestampInbox,children:e.sentAt?g(e.sentAt):"Time not available"})]},e.id):(0,c.jsxs)("li",{className:r.outbox,children:[(0,c.jsx)("span",{className:(0,o.A)(r.ownerName,r.right),children:u?u.username:"User"}),(0,c.jsx)("span",{className:r.msgOutboxContent,children:e.content}),(0,c.jsx)("span",{className:r.timestampOutbox,children:e.sentAt?g(e.sentAt):"Time not available"})]},e.id)}),s&&(0,c.jsx)("li",{className:r.filePreview,children:s.type.startsWith("image/")?(0,c.jsx)("img",{src:URL.createObjectURL(s),alt:"File Preview",className:r.imagePreview}):(0,c.jsx)("span",{children:s.name})}),(0,c.jsx)("div",{ref:l})]})})}}}]);
//# sourceMappingURL=331.de41cdb2.chunk.js.map