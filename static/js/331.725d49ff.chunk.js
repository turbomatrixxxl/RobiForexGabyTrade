"use strict";(self.webpackChunkmy_react_app=self.webpackChunkmy_react_app||[]).push([[331],{1690:(e,s,t)=>{t.d(s,{A:()=>l});var a=t(9379),n=(t(5043),t(8387));const i="ChatInput_inputContainer__IBOKh",o="ChatInput_input__s+2Y2";var r=t(579);const l=function(e){let{type:s,placeholder:t,required:l,className:c,name:d,handleChange:m,width:g,value:u,paddingLeft:_,autoComplete:h,handleBlur:p,children:v,textarea:C=!1}=e;const x={autoComplete:h||"off",style:{paddingLeft:_||"0px"},onChange:m,name:d||"",className:(0,n.A)(o,c),placeholder:t||"",required:l||!1,value:u||"",onBlur:p};return(0,r.jsxs)("div",{style:{width:g||"auto"},className:i,children:[C?(0,r.jsx)("textarea",(0,a.A)((0,a.A)({},x),{},{rows:"1",className:(0,n.A)(o,c)})):(0,r.jsx)("input",(0,a.A)((0,a.A)({className:(0,n.A)(o,c)},x),{},{type:s||"text"})),v]})}},4387:(e,s,t)=>{t.d(s,{R:()=>u});var a=t(3003),n=t(2099);const i=e=>e.chats,o=(0,n.Mz)([i],e=>e.activeChats),r=(0,n.Mz)([i],e=>e.chats),l=(0,n.Mz)([i],e=>e.loading),c=(0,n.Mz)([i],e=>e.error),d=(0,n.Mz)([i],e=>e.visitedChatIds),m={},g=e=>(m[e]||(m[e]=(0,n.Mz)([r],s=>s.find(s=>s.id===e)||null)),m[e]),u=()=>{const e=(0,a.wA)();return{activeChats:(0,a.d4)(o),isLoading:(0,a.d4)(l),errorChats:(0,a.d4)(c),chats:(0,a.d4)(r),chatById:(0,a.d4)(g),dispatch:e,visitedChatIds:(0,a.d4)(d)}}},8331:(e,s,t)=>{t.r(s),t.d(s,{default:()=>_});var a=t(5043),n=t(3003),i=t(5140),o=t(3216),r=t(4387),l=t(1690),c=t(184),d=t(4258);const m={chatPage:"ConversationsPage_chatPage__iHtDC",messageList:"ConversationsPage_messageList__UOKyd",outbox:"ConversationsPage_outbox__vbClZ",inbox:"ConversationsPage_inbox__FdOzf",ownerName:"ConversationsPage_ownerName__A0CU9",left:"ConversationsPage_left__YpJWE",right:"ConversationsPage_right__suqrc",msgOutboxContent:"ConversationsPage_msgOutboxContent__4-udD",timestampOutbox:"ConversationsPage_timestampOutbox__WioDZ",msgInboxContent:"ConversationsPage_msgInboxContent__013QE",timestampInbox:"ConversationsPage_timestampInbox__Ch2ye",sendMsgCont:"ConversationsPage_sendMsgCont__JHT7e",sendMsgInput:"ConversationsPage_sendMsgInput__wI62t",writeMsgButton:"ConversationsPage_writeMsgButton__8qlVa",paperClipIcon:"ConversationsPage_paperClipIcon__WcUSa",smileIcon:"ConversationsPage_smileIcon__k+3uR",sendIcon:"ConversationsPage_sendIcon__vdd5C",sendMsgButton:"ConversationsPage_sendMsgButton__aXC9y",emojiWrapper:"ConversationsPage_emojiWrapper__c2SaD",emojiPicker:"ConversationsPage_emojiPicker__JnkFE",emojiPickerWrapper:"ConversationsPage_emojiPickerWrapper__LdSyq",filePreview:"ConversationsPage_filePreview__bdJ60",imagePreview:"ConversationsPage_imagePreview__kPE-I"};var g=t(8387),u=t(579);const _=function(){const{chatId:e}=(0,o.g)(),{chats:s}=(0,r.R)(),t=(0,n.wA)(),_=(0,a.useRef)(),h=(0,a.useRef)(null),[p,v]=(0,a.useState)(""),[C,x]=(0,a.useState)(!1),[j,P]=(0,a.useState)(null),N=s.find(s=>s.id===e),w=(null===N||void 0===N?void 0:N.messages)||[],I=e=>{let s=new Date(e);if(isNaN(s.getTime())){const t=e.replace(/(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}):(\d{2})\.(\d{3})Z$/,"$1:59.$3Z");s=new Date(t)}if(isNaN(s.getTime()))return"";s.getSeconds()>59&&s.setSeconds(59);const t=s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),a=s.getDate(),n=s.toLocaleString("default",{month:"long"}),i=s.getFullYear();return"".concat(a," ").concat(n," ").concat(i,"-").concat(t)},b=[...w].sort((e,s)=>new Date(I(e.sentAt)).getTime()-new Date(I(s.sentAt)).getTime());if((0,a.useEffect)(()=>{var e;null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[b]),!N)return(0,u.jsx)("div",{className:m.notFound,children:"Chat not found"});const f=JSON.parse(localStorage.getItem("user"));return(0,u.jsxs)("div",{className:m.chatPage,children:[(0,u.jsxs)("ul",{className:m.messageList,children:[b.map(e=>{var s;return e.isInbox?(0,u.jsxs)("li",{className:m.inbox,children:[(0,u.jsx)("span",{className:(0,g.A)(m.ownerName,m.left),children:null!==(s=null===N||void 0===N?void 0:N.user.name)&&void 0!==s?s:""}),(0,u.jsx)("span",{className:m.msgInboxContent,children:e.content}),(0,u.jsx)("span",{className:m.timestampInbox,children:e.sentAt?I(e.sentAt):"Time not available"})]},e.id):(0,u.jsxs)("li",{className:m.outbox,children:[(0,u.jsx)("span",{className:(0,g.A)(m.ownerName,m.right),children:f?f.username:"User"}),(0,u.jsx)("span",{className:m.msgOutboxContent,children:e.content}),(0,u.jsx)("span",{className:m.timestampOutbox,children:e.sentAt?I(e.sentAt):"Time not available"})]},e.id)}),j&&(0,u.jsx)("li",{className:m.filePreview,children:j.type.startsWith("image/")?(0,u.jsx)("img",{src:URL.createObjectURL(j),alt:"File Preview",className:m.imagePreview}):(0,u.jsx)("span",{children:j.name})}),(0,u.jsx)("div",{ref:h})]}),(0,u.jsxs)("div",{className:m.sendMsgCont,children:[(0,u.jsxs)(l.A,{type:"textarea",textarea:!0,width:"100%",className:m.sendMsgInput,paddingLeft:"5px",placeholder:"Type here...",value:p,handleChange:e=>v(e.target.value),children:[(0,u.jsx)("button",{type:"button",className:m.writeMsgButton,onClick:()=>{_.current.click()},children:(0,u.jsx)(c.EHs,{className:m.paperClipIcon,size:16})}),(0,u.jsx)("input",{type:"file",ref:_,onChange:e=>{const s=e.target.files[0];s&&P(s)},style:{display:"none"}}),(0,u.jsxs)("div",{className:m.emojiWrapper,children:[(0,u.jsx)("button",{type:"button",className:m.writeMsgButton,onClick:()=>{x(e=>!e)},children:(0,u.jsx)(c.kqk,{className:m.smileIcon,size:16})}),C&&(0,u.jsx)("div",{className:m.emojiPicker,children:(0,u.jsx)(d.Ay,{onEmojiClick:e=>{v(s=>s+e.emoji)},width:250,height:300,previewConfig:{showPreview:!1},searchPlaceHolder:"Search emoji..."})})]})]}),(0,u.jsx)("button",{className:m.sendMsgButton,onClick:()=>{p.trim()&&(t((0,i.wi)({chatId:e,newMessages:[{id:crypto.randomUUID(),content:p,isInbox:!1,sentAt:(new Date).toISOString()}]})),v(""),x(!1),P(null))},children:(0,u.jsx)(c.Cer,{className:m.sendIcon,size:18})})]})]})}}}]);
//# sourceMappingURL=331.725d49ff.chunk.js.map